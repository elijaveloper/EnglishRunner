<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.7.1/pixi.min.js"></script>
  </head>
  <body>

  </body>
  <script type="text/javascript">
    const app = new PIXI.Application(800,480,{
      backgroundColor: 0xededed
    });
    var body = document.querySelector("body");
    body.appendChild(app.view);

    var graphic = new PIXI.Graphics();
    app.stage.addChild(graphic);

    var tris = [];
    var letters = [];
    var sequence = "abcdefghijklmnopqrstuvwxyz".split('');
    var typed = [];
    var spacing = 500;
    var speed = 10;
    var movement = 800;
    var jumpHeightLimit = 60;
    var jump = false;
    var jumpHeight = 0;

    for(var i=0;i<sequence.length;i++){
      tris.push({
        id:i,
        x:0,y:280
      });

      letters.push(new PIXI.Text(sequence[i],{fill:0xffffff}));
      app.stage.addChild(letters[i]);
    }

    function drawTriangle(x,y,size){
      graphic.moveTo(x,y);
      graphic.lineTo(x+size,y-size);
      graphic.lineTo(x+size*2,y);
      graphic.lineTo(x,y);
    }

    function drawText(x,y,letter){

    }

    function drawPlayer(x,y,size){
      graphic.drawRect(x,y,size,size);
    }

    body.onkeydown = function(e){
      if((e.key == sequence[typed.length]) && (jumpHeight == 0)){
        typed += e.key;
        jump = true;
      }
    }

    app.ticker.add(function(){
      if(movement > -spacing*sequence.length){
        movement -= speed;
      }else{
        movement = 800;
      }

      graphic.clear();
      graphic.beginFill(0x000000);

      drawPlayer(150,240,40);

      if(jump){
        if(jumpHeight <= jumpHeightLimit){
          jumpHeight += Math.ceil(speed/2);
        }else{
          jump = false;
        }
      }else{
        if(jumpHeight>0){
          jumpHeight -= Math.floor(speed/2);
        }
        if(jumpHeight<0){
          jumpHeight = 0;
        }
      }

      console.log(jumpHeight);

      tris.forEach(function(tri){
        var x = tri.x + (tri.id*spacing) + movement;
        var y = tri.y + jumpHeight;

        drawTriangle(x,y,20);
        letters[tri.id].x = x;
        letters[tri.id].y = y;
      });

      graphic.drawRect(0,280 + jumpHeight, 800, 100);

    });

  </script>
</html>
